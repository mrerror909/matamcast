<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لوحة التحكم الإدارية المحسنة – القنوات الذكية</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        /* نفس النمط الأساسي مع تحسينات طفيفة */
        * { margin:0; padding:0; box-sizing:border-box; }
        body { 
            font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background:linear-gradient(135deg,#2c3e50 0%,#3498db 100%); 
            min-height:100vh; 
        }
        
        /* شاشة تسجيل الدخول */
        .login-container{ 
            display:flex; 
            justify-content:center; 
            align-items:center; 
            min-height:100vh; 
            padding:20px; 
        }
        
        .login-card{ 
            background:rgba(255,255,255,.95); 
            padding:40px; 
            border-radius:20px; 
            box-shadow:0 20px 60px rgba(0,0,0,.3); 
            text-align:center; 
            max-width:400px; 
            width:100%; 
        }
        
        .login-icon{ 
            font-size:3rem; 
            color:#3498db; 
            margin-bottom:20px; 
        }
        
        .login-title{ 
            font-size:1.8rem; 
            color:#2c3e50; 
            margin-bottom:10px; 
        }
        
        .login-subtitle{ 
            color:#666; 
            margin-bottom:30px; 
        }
        
        .form-group{ 
            margin-bottom:20px; 
            position:relative; 
        }
        
        .form-input{ 
            width:100%; 
            padding:15px 20px 15px 50px; 
            border:2px solid #ecf0f1; 
            border-radius:25px; 
            font-size:1rem; 
            transition:all .3s ease; 
        }
        
        .form-input:focus{ 
            outline:none; 
            border-color:#3498db; 
            box-shadow:0 0 10px rgba(52,152,219,.3); 
        }
        
        .input-icon{ 
            position:absolute; 
            left:18px; 
            top:50%; 
            transform:translateY(-50%); 
            color:#bdc3c7; 
        }
        
        .login-btn{ 
            background:linear-gradient(45deg,#3498db,#2980b9); 
            border:none; 
            padding:15px 40px; 
            border-radius:25px; 
            color:#fff; 
            font-weight:600; 
            font-size:1rem; 
            cursor:pointer; 
            transition:all .3s ease; 
            width:100%; 
        }
        
        .login-btn:hover{ 
            transform:translateY(-2px); 
            box-shadow:0 5px 15px rgba(52,152,219,.4); 
        }

        /* لوحة التحكم الرئيسية */
        .admin-panel{ 
            display:none; 
            padding:0; 
            background:#f8f9fa; 
            min-height:100vh;
        }
        
        .admin-navbar{ 
            background:rgba(255,255,255,.95); 
            padding:20px 0; 
            box-shadow:0 2px 20px rgba(0,0,0,.1); 
            position:sticky; 
            top:0; 
            z-index:1000; 
        }
        
        .nav-container{ 
            max-width:1400px; 
            margin:0 auto; 
            padding:0 20px; 
            display:flex; 
            justify-content:space-between; 
            align-items:center; 
        }
        
        .admin-logo{ 
            display:flex; 
            align-items:center; 
            gap:10px; 
            color:#2c3e50; 
            font-size:1.5rem; 
            font-weight:bold; 
        }
        
        .nav-actions{ 
            display:flex; 
            gap:10px; 
            align-items:center; 
        }
        
        .logout-btn{ 
            background:linear-gradient(45deg,#e74c3c,#c0392b); 
            border:none; 
            padding:10px 20px; 
            border-radius:20px; 
            color:#fff; 
            font-weight:600; 
            cursor:pointer; 
            transition:all .3s ease; 
        }
        
        .logout-btn:hover{ 
            transform:translateY(-2px); 
        }
        
        .admin-container{ 
            max-width:1400px; 
            margin:0 auto; 
            padding:40px 20px; 
        }

        /* بطاقات وإطارات */
        .stats-overview{ 
            display:grid; 
            grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); 
            gap:25px; 
            margin-bottom:40px; 
        }
        
        .stat-card{ 
            background:#fff; 
            padding:30px; 
            border-radius:15px; 
            box-shadow:0 5px 20px rgba(0,0,0,.1); 
            text-align:center; 
            transition:transform .3s ease; 
        }
        
        .stat-card:hover{ 
            transform:translateY(-5px); 
        }
        
        .stat-icon{ 
            font-size:2.5rem; 
            margin-bottom:15px; 
        }
        
        .stat-number{ 
            font-size:2.2rem; 
            font-weight:bold; 
            margin-bottom:8px; 
        }
        
        .stat-label{ 
            color:#666; 
            font-size:1rem; 
        }
        
        .section-card{ 
            background:#fff; 
            border-radius:15px; 
            box-shadow:0 5px 20px rgba(0,0,0,.1); 
            margin-bottom:30px; 
            overflow:hidden; 
        }
        
        .section-header{ 
            background:linear-gradient(45deg,#667eea,#764ba2); 
            color:#fff; 
            padding:25px 30px; 
            display:flex; 
            align-items:center; 
            justify-content:space-between; 
        }
        
        .section-title-group{ 
            display:flex; 
            align-items:center; 
            gap:15px; 
        }
        
        .section-title{ 
            font-size:1.4rem; 
            font-weight:600; 
        }
        
        .section-content{ 
            padding:30px; 
        }

        /* الإشعارات */
        .notification{ 
            position:fixed; 
            top:20px; 
            right:20px; 
            padding:15px 20px; 
            border-radius:10px; 
            color:#fff; 
            font-weight:600; 
            z-index:3000; 
            transform:translateX(100%); 
            transition:transform .3s ease; 
            max-width:400px; 
        }
        
        .notification.show{ 
            transform:translateX(0); 
        }
        
        .notification.success{ 
            background:linear-gradient(45deg,#27ae60,#2ecc71); 
        }
        
        .notification.error{ 
            background:linear-gradient(45deg,#e74c3c,#c0392b); 
        }
        
        .notification.warning{ 
            background:linear-gradient(45deg,#f39c12,#e67e22); 
        }

        .loading{ 
            text-align:center; 
            padding:40px; 
            color:#7f8c8d; 
        }

        @media (max-width: 768px){
            .stats-overview{ 
                grid-template-columns:repeat(2,1fr); 
            }
            .admin-container{ 
                padding:20px 15px; 
            }
            .nav-actions{ 
                flex-direction:column; 
                gap:5px; 
            }
        }
    </style>
</head>
<body>
    <!-- شاشة تسجيل الدخول -->
    <div id="loginContainer" class="login-container">
        <div class="login-card">
            <div class="login-icon"><i class="fas fa-shield-alt"></i></div>
            <h2 class="login-title">لوحة التحكم</h2>
            <p class="login-subtitle">قم بتسجيل الدخول للوصول إلى الإدارة</p>
            <div class="form-group">
                <input type="password" id="adminPass" class="form-input" placeholder="كلمة المرور" onkeypress="handlePasswordKeyPress(event)">
                <i class="fas fa-lock input-icon"></i>
            </div>
            <button class="login-btn" onclick="login()">
                <i class="fas fa-sign-in-alt"></i> تسجيل الدخول
            </button>
            <div id="loginError" style="color:#e74c3c; margin-top:10px; display:none;"></div>
        </div>
    </div>

    <!-- لوحة التحكم الرئيسية -->
    <div id="adminPanel" class="admin-panel">
        <nav class="admin-navbar">
            <div class="nav-container">
                <div class="admin-logo">
                    <i class="fas fa-cogs"></i>
                    <span>لوحة التحكم الإدارية</span>
                </div>
                <div class="nav-actions">
                    <button class="logout-btn" onclick="logout()">
                        <i class="fas fa-sign-out-alt"></i> خروج
                    </button>
                </div>
            </div>
        </nav>

        <div class="admin-container">
            <!-- إحصائيات عامة -->
            <div class="stats-overview" id="statsOverview">
                <div class="stat-card">
                    <div class="stat-icon requests"><i class="fas fa-plug"></i></div>
                    <div class="stat-number">0</div>
                    <div class="stat-label">طلبات API</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon channels"><i class="fas fa-tv"></i></div>
                    <div class="stat-number">0</div>
                    <div class="stat-label">إجمالي القنوات</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon live"><i class="fas fa-broadcast-tower"></i></div>
                    <div class="stat-number">0</div>
                    <div class="stat-label">قنوات مباشرة</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon api-status"><i class="fas fa-signal"></i></div>
                    <div class="stat-number">1000</div>
                    <div class="stat-label">حصة متبقية</div>
                </div>
            </div>

            <!-- قسم إدارة القنوات -->
            <div class="section-card">
                <div class="section-header">
                    <div class="section-title-group">
                        <i class="fas fa-tv"></i>
                        <h3 class="section-title">إدارة القنوات</h3>
                    </div>
                </div>
                <div class="section-content">
                    <div class="loading" id="channelsLoading">
                        <p>جاري تحميل القنوات...</p>
                    </div>
                    <div id="channels"></div>
                </div>
            </div>

            <!-- قسم الإعدادات -->
            <div class="section-card">
                <div class="section-header">
                    <div class="section-title-group">
                        <i class="fas fa-cog"></i>
                        <h3 class="section-title">إعدادات النظام</h3>
                    </div>
                </div>
                <div class="section-content">
                    <p>هنا يمكنك إدارة إعدادات النظام والتحكم في القنوات.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // متغيرات عامة
        const adminPassword = "admin123"; // يمكن تحويلها لاحقاً لمتغير بيئي
        let isLoggedIn = false;

        // وظائف أساسية
        function login() {
            const password = document.getElementById('adminPass').value.trim();
            const errorDiv = document.getElementById('loginError');
            
            // إخفاء رسائل الخطأ السابقة
            errorDiv.style.display = 'none';
            
            if (!password) {
                showLoginError('يرجى إدخال كلمة المرور');
                return;
            }
            
            if (password === adminPassword) {
                isLoggedIn = true;
                document.getElementById('loginContainer').style.display = 'none';
                document.getElementById('adminPanel').style.display = 'block';
                
                showNotification('تم تسجيل الدخول بنجاح', 'success');
                loadDashboardData();
            } else {
                showLoginError('كلمة مرور خاطئة');
                // مسح كلمة المرور
                document.getElementById('adminPass').value = '';
            }
        }

        function showLoginError(message) {
            const errorDiv = document.getElementById('loginError');
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
        }

        function handlePasswordKeyPress(event) {
            if (event.key === 'Enter') {
                login();
            }
        }

        function logout() {
            if (confirm('هل تريد تسجيل الخروج؟')) {
                isLoggedIn = false;
                document.getElementById('loginContainer').style.display = 'flex';
                document.getElementById('adminPanel').style.display = 'none';
                document.getElementById('adminPass').value = '';
                
                showNotification('تم تسجيل الخروج', 'success');
            }
        }

        // إشعارات
        function showNotification(text, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = text;
            document.body.appendChild(notification);
            
            // عرض الإشعار
            requestAnimationFrame(() => {
                notification.classList.add('show');
            });
            
            // إخفاء الإشعار بعد 3 ثوان
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.remove();
                    }
                }, 300);
            }, 3000);
        }

        // تحميل بيانات لوحة التحكم
        function loadDashboardData() {
            const channelsDiv = document.getElementById('channels');
            const loadingDiv = document.getElementById('channelsLoading');
            
            // محاكاة تحميل البيانات
            setTimeout(() => {
                loadingDiv.style.display = 'none';
                channelsDiv.innerHTML = `
                    <div style="text-align:center; padding:40px; color:#7f8c8d;">
                        <i class="fas fa-tv" style="font-size:3rem; margin-bottom:20px;"></i>
                        <h3>مرحباً بك في لوحة التحكم</h3>
                        <p>النظام جاهز للاستخدام. يمكنك الآن إدارة القنوات والإعدادات.</p>
                    </div>
                `;
            }, 1000);
        }

        // تهيئة النظام عند تحميل الصفحة
        document.addEventListener('DOMContentLoaded', function() {
            // التركيز على حقل كلمة المرور
            document.getElementById('adminPass').focus();
            
            // إخفاء رسائل الخطأ عند البداية
            document.getElementById('loginError').style.display = 'none';
            
            console.log('لوحة التحكم جاهزة');
        });

        // التعامل مع أخطاء JavaScript
        window.addEventListener('error', function(e) {
            console.error('خطأ في JavaScript:', e.error);
            showNotification('حدث خطأ في النظام', 'error');
        });

        // منع إرسال النموذج الافتراضي
        document.addEventListener('submit', function(e) {
            e.preventDefault();
        });
    </script>
</body>
</html>
